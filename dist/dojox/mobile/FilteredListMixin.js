//>>built
define("dojox/mobile/FilteredListMixin","require,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/dom,dojo/dom-class,dojo/dom-construct,dojo/aspect,dijit/registry,./SearchBox,./ScrollableView".split(","),function(c,h,i,d,m,f,b,j,k,e,l){return i("dojox.mobile.FilteredListMixin",null,{filterBoxRef:null,placeHolder:"",filterBoxVisible:!0,_filterBox:null,_createdFilterBox:null,_createdScrollableView:null,startup:function(){if(!this._started){this.inherited(arguments);if(this.filterBoxRef)if((this._filterBox=
k.byId(this.filterBoxRef))&&this._filterBox.isInstanceOf(e))this._filterBox.set("searchAttr",this.labelProperty?this.labelProperty:"label"),this._filterBox.placeHolder||this._filterBox.set("placeHolder",this.placeHolder),this._filterBox.on("search",d.hitch(this,"_onFilter"));else throw Error("Cannot find a widget of type dojox/mobile/SearchBox or subclass at the specified filterBoxRef: "+this.filterBoxRef);else{this._createdFilterBox=this._filterBox=new e({searchAttr:this.labelProperty?this.labelProperty:
"label",ignoreCase:!0,incremental:!0,pageSize:1,onSearch:d.hitch(this,"_onFilter"),selectOnClick:!0,placeHolder:this.placeHolder});this._createdScrollableView=new l;var a=this.domNode;this.domNode.parentNode.replaceChild(this._createdScrollableView.domNode,this.domNode);b.place(a,this._createdScrollableView.containerNode);a=b.create("div");b.place(this._createdFilterBox.domNode,a);b.place(a,this._createdScrollableView.domNode,"before");this.filterBoxClass&&f.add(a,this.filterBoxClass);this._createdFilterBox.startup();
this._createdScrollableView.startup();this._createdScrollableView.resize()}this.store?this._initStore():this._createStore(this._initStore)}},_setFilterBoxVisibleAttr:function(a){this._set("filterBoxVisible",a);if(this._filterBox&&this._filterBox.domNode)this._filterBox.domNode.style.display=a?"":"none"},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._filterBox&&this._filterBox.set("placeHolder",a)},getFilterBox:function(){return this._filterBox},getScrollableView:function(){return this._createdScrollableView},
_initStore:function(){var a=this.store;a.hasOwnProperty("idProperty")?this._filterBox.store=a:c(["dojo/store/DataStore"],d.hitch(this,function(g){a=new g({store:a});this._filterBox.store=a}))},_createStore:function(a){c(["./_StoreListMixin","dojo/store/Memory"],d.hitch(this,function(g,b){i.safeMixin(this,new g);this.append=!0;this.createListItem=function(a){return a.listItem};j.before(this,"generateList",function(){h.forEach(this.getChildren(),function(a){a.domNode.parentNode.removeChild(a.domNode)})});
var c=[],e=null;h.forEach(this.getChildren(),function(a){e=a.label?a.label:a.domNode.innerText||a.domNode.textContent;c.push({label:e,listItem:a})});var f=new b({idProperty:"label",data:{items:c}});this.store=null;this.query={};this.setStore(f,this.query,this.queryOptions);d.hitch(this,a)()}))},_onFilter:function(a,b,c){!1!==this.onFilter(a,b,c)&&this.setQuery(b)},onFilter:function(){},destroy:function(a){this.inherited(arguments);if(this._createdFilterBox)this._createdFilterBox.destroy(a),this._createdFilterBox=
null;if(this._createdScrollableView)this._createdScrollableView.destroy(a),this._createdScrollableView=null}})});