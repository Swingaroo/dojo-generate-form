//>>built
define("dojox/mobile/ValuePickerSlot","dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/_base/lang,dojo/_base/window,dojo/dom-class,dojo/dom-construct,dojo/touch,dijit/_WidgetBase,./iconUtils,dojo/has,dojo/has!dojo-bidi?dojox/mobile/bidi/ValuePickerSlot".split(","),function(d,k,o,h,l,j,c,f,g,m,n,p){g=k(n("dojo-bidi")?"dojox.mobile.NonBidiValuePickerSlot":"dojox.mobile.ValuePickerSlot",g,{items:[],labels:[],labelFrom:0,labelTo:0,zeroPad:0,value:"",step:1,readOnly:!1,tabIndex:"0",baseClass:"mblValuePickerSlot",
buildRendering:function(){this.inherited(arguments);this.initLabels();if(0<this.labels.length){this.items=[];for(i=0;i<this.labels.length;i++)this.items.push([i,this.labels[i]])}this.plusBtnNode=c.create("div",{className:"mblValuePickerSlotPlusButton mblValuePickerSlotButton",title:"+"},this.domNode);this.plusIconNode=c.create("div",{className:"mblValuePickerSlotIcon"},this.plusBtnNode);m.createIcon("mblDomButtonGrayPlus",null,this.plusIconNode);this.inputAreaNode=c.create("div",{className:"mblValuePickerSlotInputArea"},
this.domNode);this.inputNode=c.create("input",{className:"mblValuePickerSlotInput",readonly:this.readOnly},this.inputAreaNode);this.minusBtnNode=c.create("div",{className:"mblValuePickerSlotMinusButton mblValuePickerSlotButton",title:"-"},this.domNode);this.minusIconNode=c.create("div",{className:"mblValuePickerSlotIcon"},this.minusBtnNode);m.createIcon("mblDomButtonGrayMinus",null,this.minusIconNode);if(""===this.value&&0<this.items.length)this.value=this.items[0][1];this._initialValue=this.value},
startup:function(){if(!this._started)this._handlers=[this.connect(this.plusBtnNode,f.press,"_onTouchStart"),this.connect(this.minusBtnNode,f.press,"_onTouchStart"),this.connect(this.plusBtnNode,"onkeydown","_onClick"),this.connect(this.minusBtnNode,"onkeydown","_onClick"),this.connect(this.inputNode,"onchange",h.hitch(this,function(a){this._onChange(a)}))],this.inherited(arguments)},initLabels:function(){if(this.labelFrom!==this.labelTo)for(var a=this.labels=[],b=this.zeroPad&&Array(this.zeroPad).join("0"),
e=this.labelFrom;e<=this.labelTo;e+=this.step)a.push(this.zeroPad?(b+e).slice(-this.zeroPad):e+"")},spin:function(a){for(var b=-1,e=this.get("value"),c=this.items.length,d=0;d<c;d++)if(this.items[d][1]===e){b=d;break}-1!=e&&(b+=a,0>b&&(b+=(Math.abs(Math.ceil(b/c))+1)*c),this.set("value",this.items[b%c][1]))},setInitialValue:function(){this.set("value",this._initialValue)},_onClick:function(a){if(!(a&&"keydown"===a.type&&13!==a.keyCode||!1===this.onClick(a))){a=a.currentTarget;if(a===this.plusBtnNode||
a===this.minusBtnNode)this._btn=a;this.spin(this._btn===this.plusBtnNode?1:-1)}},onClick:function(){},_onChange:function(a){!1!==this.onChange(a)&&(a=this.validate(this.get("value")),this.set("value",a.length?a[0][1]:this.value))},onChange:function(){},validate:function(a){return d.filter(this.items,function(b){return(b[1]+"").toLowerCase()==(a+"").toLowerCase()})},_onTouchStart:function(a){this._conn=[this.connect(l.body(),f.move,"_onTouchMove"),this.connect(l.body(),f.release,"_onTouchEnd")];this.touchStartX=
a.touches?a.touches[0].pageX:a.clientX;this.touchStartY=a.touches?a.touches[0].pageY:a.clientY;j.add(a.currentTarget,"mblValuePickerSlotButtonSelected");this._btn=a.currentTarget;if(this._timer)clearTimeout(this._timer),this._timer=null;if(this._interval)clearInterval(this._interval),this._interval=null;this._timer=setTimeout(h.hitch(this,function(){this._interval=setInterval(h.hitch(this,function(){this.spin(this._btn===this.plusBtnNode?1:-1)}),60);this._timer=null}),1E3);o.stop(a)},_onTouchMove:function(a){var b=
a.touches?a.touches[0].pageY:a.clientY;if(4<=Math.abs((a.touches?a.touches[0].pageX:a.clientX)-this.touchStartX)||4<=Math.abs(b-this.touchStartY)){if(this._timer)clearTimeout(this._timer),this._timer=null;if(this._interval)clearInterval(this._interval),this._interval=null;d.forEach(this._conn,this.disconnect,this);j.remove(this._btn,"mblValuePickerSlotButtonSelected")}},_onTouchEnd:function(a){if(this._timer)clearTimeout(this._timer),this._timer=null;d.forEach(this._conn,this.disconnect,this);j.remove(this._btn,
"mblValuePickerSlotButtonSelected");this._interval?(clearInterval(this._interval),this._interval=null):this._onClick(a)},_getKeyAttr:function(){var a=this.get("value"),b=d.filter(this.items,function(b){return b[1]===a})[0];return b?b[0]:null},_getValueAttr:function(){return this.inputNode.value},_setValueAttr:function(a){this.inputNode.value=a;this._set("value",a);if((a=this.getParent())&&a.onValueChanged)a.onValueChanged(this)},_setTabIndexAttr:function(a){this.plusBtnNode.setAttribute("tabIndex",
a);this.minusBtnNode.setAttribute("tabIndex",a)}});return n("dojo-bidi")?k("dojox.mobile.ValuePickerSlot",[g,p]):g});