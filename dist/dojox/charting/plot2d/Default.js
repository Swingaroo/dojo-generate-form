//>>built
define("dojox/charting/plot2d/Default","dojo/_base/lang,dojo/_base/declare,dojo/_base/array,./CartesianBase,./_PlotEvents,./common,dojox/lang/functional,dojox/lang/functional/reversed,dojox/lang/utils,dojox/gfx/fx".split(","),function(o,z,l,G,H,t,I,J,u,K){var L=J.lambda("item.purgeGroup()");return z("dojox.charting.plot2d.Default",[G,H],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},styleFunc:null,
font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(h,b){this.opt=o.clone(o.mixin(this.opt,this.defaultParams));u.updateWithObject(this.opt,b);u.updateWithPattern(this.opt,b,this.optionalParams);this.animate=this.opt.animate},createPath:function(h,b,c){var f;this.opt.enableCache&&0<h._pathFreePool.length?(f=h._pathFreePool.pop(),f.setShape(c),b.add(f)):f=b.createPath(c);this.opt.enableCache&&h._pathUsePool.push(f);
return f},buildSegments:function(h,b){for(var c=this.series[h],f=b?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,l=b?Math.min(c.data.length,Math.ceil(this._hScaler.bounds.to)):c.data.length,g=null,o=[];f<l;f++)if(null!=c.data[f]&&(b||null!=c.data[f].y))g||(g=[],o.push({index:f,rseg:g})),g.push(b&&c.data[f].hasOwnProperty("y")?c.data[f].y:c.data[f]);else if(!this.opt.interpolate||b)g=null;return o},render:function(h,b){if(this.zoom&&!this.isDataDirty())return this.performZoom(h,b);this.resetEvents();
this.dirty=this.isDirty();var c;if(this.dirty)l.forEach(this.series,L),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),c=this.getGroup(),I.forEachRev(this.series,function(e){e.cleanGroup(c)});for(var f=this.chart.theme,p,g,u=this.events(),v=this.series.length-1;0<=v;--v){var a=this.series[v];if(!this.dirty&&!a.dirty)f.skip(),this._reconnectEvents(a.name);else{a.cleanGroup();if(this.opt.enableCache)a._pathFreePool=(a._pathFreePool?a._pathFreePool:[]).concat(a._pathUsePool?
a._pathUsePool:[]),a._pathUsePool=[];if(a.data.length){var i=f.next(this.opt.areas?"area":"line",[this.opt,a],!0),d,A=this._hScaler.scaler.getTransformerFromModel(this._hScaler),B=this._vScaler.scaler.getTransformerFromModel(this._vScaler),z=this._eventSeries[a.name]=Array(a.data.length);c=a.group;for(var w=l.some(a.data,function(e){return"number"==typeof e||e&&!e.hasOwnProperty("x")}),x=this.buildSegments(v,w),r=0;r<x.length;r++){var k=x[r];d=w?l.map(k.rseg,function(e,a){return{x:A(a+k.index+1)+
b.l,y:h.height-b.b-B(e),data:e}},this):l.map(k.rseg,function(e){return{x:A(e.x)+b.l,y:h.height-b.b-B(e.y),data:e}},this);if(w&&this.opt.interpolate)for(;r<x.length;)r++,(k=x[r])&&(d=d.concat(l.map(k.rseg,function(e,a){return{x:A(a+k.index+1)+b.l,y:h.height-b.b-B(e),data:e}},this)));var m=this.opt.tension?t.curve(d,this.opt.tension):"";if(this.opt.areas&&1<d.length){var s=this._plotFill(i.series.fill,h,b),n=o.clone(d);this.opt.tension?a.dyn.fill=c.createPath(m+" "+("L"+n[n.length-1].x+","+(h.height-
b.b)+" L"+n[0].x+","+(h.height-b.b)+" L"+n[0].x+","+n[0].y)).setFill(s).getFill():(n.push({x:d[d.length-1].x,y:h.height-b.b}),n.push({x:d[0].x,y:h.height-b.b}),n.push(d[0]),a.dyn.fill=c.createPolyline(n).setFill(s).getFill())}if(this.opt.lines||this.opt.markers)if(p=i.series.stroke,i.series.outline)g=a.dyn.outline=t.makeStroke(i.series.outline),g.width=2*g.width+p.width;if(this.opt.markers)a.dyn.marker=i.symbol;var y=null,C=null,D=null;if(p&&i.series.shadow&&1<d.length){var q=i.series.shadow,s=l.map(d,
function(a){return{x:a.x+q.dx,y:a.y+q.dy}});if(this.opt.lines)a.dyn.shadow=this.opt.tension?c.createPath(t.curve(s,this.opt.tension)).setStroke(q).getStroke():c.createPolyline(s).setStroke(q).getStroke();if(this.opt.markers&&i.marker.shadow)q=i.marker.shadow,D=l.map(s,function(e){return this.createPath(a,c,"M"+e.x+" "+e.y+" "+i.symbol).setStroke(q).setFill(q.color)},this)}if(this.opt.lines&&1<d.length){if(g)a.dyn.outline=this.opt.tension?c.createPath(m).setStroke(g).getStroke():c.createPolyline(d).setStroke(g).getStroke();
a.dyn.stroke=this.opt.tension?c.createPath(m).setStroke(p).getStroke():c.createPolyline(d).setStroke(p).getStroke()}m=null;if(this.opt.markers){var j=i,y=Array(d.length),C=Array(d.length);g=null;if(j.marker.outline)g=t.makeStroke(j.marker.outline),g.width=2*g.width+(j.marker.stroke?j.marker.stroke.width:0);l.forEach(d,function(e,b){if(this.opt.styleFunc||"number"!=typeof e.data){var d="number"!=typeof e.data?[e.data]:[];this.opt.styleFunc&&d.push(this.opt.styleFunc(e.data));j=f.addMixin(i,"marker",
d,!0)}else j=f.post(i,"marker");d="M"+e.x+" "+e.y+" "+j.symbol;g&&(C[b]=this.createPath(a,c,d).setStroke(g));y[b]=this.createPath(a,c,d).setStroke(j.marker.stroke).setFill(j.marker.fill)},this);a.dyn.markerFill=j.marker.fill;a.dyn.markerStroke=j.marker.stroke;!m&&this.opt.labels&&(m=y[0].getBoundingBox());u?l.forEach(y,function(e,b){var c={element:"marker",index:b+k.index,run:a,shape:e,outline:C[b]||null,shadow:D&&D[b]||null,cx:d[b].x,cy:d[b].y};w?(c.x=b+k.index+1,c.y=a.data[b+k.index]):(c.x=k.rseg[b].x,
c.y=a.data[b+k.index].y);this._connectEvents(c);z[b+k.index]=c},this):delete this._eventSeries[a.name]}if(this.opt.labels){var E=m?m.width:2,F=m?m.height:2;l.forEach(d,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var d="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&d.push(this.opt.styleFunc(a.data));j=f.addMixin(i,"marker",d,!0)}else j=f.post(i,"marker");this.createLabel(c,k.rseg[b],{x:a.x-E/2,y:a.y-F/2,width:E,height:F},j)},this)}}a.dirty=!1}else a.dirty=!1,f.skip()}}this.animate&&
(p=this.getGroup(),K.animateTransform(o.delegate({shape:p,duration:1200,transform:[{name:"translate",start:[0,h.height-b.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play());this.dirty=!1;return this}})});