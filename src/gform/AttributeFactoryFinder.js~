define([ "dojo/_base/array", //
"dojo/_base/lang",//
"dojo/_base/declare",//
"./group/AttributeListWidget"//

], function(array, lang, declare, 
		AttributeListWidget) {

	return declare("app.editor.AttributeFactoryFinder",
			null, {
				constructor : function(kwArgs) {

				},

				attributeFactories : [ //
				],
				attributeFactoryMap : {},
				addFactory : function(factory) {
					this.attributeFactories.push(factory);
				},
				getFactory : function(attribute) {
					var factory = this.attributeFactoryMap[attribute.editor];
					// if (factory == null) {
					// factory = this.attributeFactoryMap[attribute.type.code];
					// }
					if (!factory) {
						var factories = array.filter(this.attributeFactories,
								function(af) {
									return af.handles && af.handles(attribute);
								});
						if (factories.length > 0) {
							factory = factories[0];
						}
					}
					return factory;
				}
			})

});
